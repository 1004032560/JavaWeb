## 1、传统JDBC的弊端

每次建立连接都要建立输入管和输出管，造成性能低下



## 2、使用数据库连接池的优势

1. 增大伸缩性（提高连接数量）
2. 健壮性（对应频繁的链接）
3. 性能好



## 3、c3p0使用步骤

1. 导入 `c3p0.jar`  和 `mysql.jar`
2. 在 `src` 下建立 `c3p0-config.cml` 配置：driverClass、jdbcUrl、user、password

~~~xml
<c3p0-config>
	<default-config>
	
		<property name="driverClass">com.mysql.jdbc.Driver</property>
     	<property name="jdbcUrl">jdbc:mysql://localhost:3306/test?characterEncoding=UTF-8</property>
     	<property name="user">root</property>
     	<property name="password">123looper.</property>
     	<!-- c3p0连接池中保留的最小连接数 -->
     	<property name="minPoolSize">3</property>
     	<!-- c3p0连接池中保留的最大连接数 -->
     	<property name="maxPoolSize">30</property>
     	<!-- c3p0连接池中初始化获取的连接数 -->
     	<property name="initialPoolSize">30</property>
     	
	</default-config>
</c3p0-config>
~~~

3. `new ComboPooledDataSource().getConnection();` 对象来获取连接
4. 接下来其他步骤与 JDBC 相同

~~~java
public static void main(String[] args) throws SQLException {

    ComboPooledDataSource dataSource = new ComboPooledDataSource();

    Connection connection = dataSource.getConnection();

    System.out.println(connection);

    PreparedStatement ps = connection.prepareStatement("select * from user");

    ResultSet rs = ps.executeQuery();

    while(rs.next()) {
        System.out.println(rs.getInt("id")+"："+rs.getString("username"));
    }

}
~~~



//调用BeanHandler，不用自己写回调方法，DBUtil中自带的方法，传参为：实体类.class；对象，反射机制